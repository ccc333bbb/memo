---
export interface Props {
  repo?: string;
  repoId?: string;
  category?: string;
  categoryId?: string;
  mapping?: string;
  strict?: boolean;
  reactionsEnabled?: boolean;
  emitMetadata?: boolean;
  inputPosition?: 'top' | 'bottom';
  theme?: 'light' | 'dark' | 'preferred_color_scheme' | 'purple_dark';
  lang?: string;
  loading?: 'lazy' | 'eager';
}

const {
  repo = "ccc333bbb/memo",
  repoId = "R_kgDOO6akLA",
  category = "Announcements",
  categoryId = "DIC_kwDOO6akLM4Cr_hK",
  mapping = "pathname",
  strict = false,
  reactionsEnabled = true,
  emitMetadata = false,
  inputPosition = "bottom",
  theme = "purple_dark",
  lang = "en",
  loading = "lazy"
} = Astro.props;
---

<div class="giscus-container">
  <div class="giscus" id="giscus"></div>
</div>

<script>
  const giscusScript = document.createElement('script');
  giscusScript.src = 'https://giscus.app/client.js';
  giscusScript.setAttribute('data-repo', 'ccc333bbb/memo');
  giscusScript.setAttribute('data-repo-id', 'R_kgDOO6akLA');
  giscusScript.setAttribute('data-category', 'Announcements');
  giscusScript.setAttribute('data-category-id', 'DIC_kwDOO6akLM4Cr_hK');
  giscusScript.setAttribute('data-mapping', 'pathname');
  giscusScript.setAttribute('data-strict', '0');
  giscusScript.setAttribute('data-reactions-enabled', '1');
  giscusScript.setAttribute('data-emit-metadata', '0');
  giscusScript.setAttribute('data-input-position', 'bottom');
  giscusScript.setAttribute('data-theme', 'purple_dark');
  giscusScript.setAttribute('data-lang', 'en');
  giscusScript.setAttribute('data-loading', 'lazy');
  giscusScript.crossOrigin = 'anonymous';
  giscusScript.async = true;
  
  document.getElementById('giscus')?.appendChild(giscusScript);
</script>

<style>
  .giscus-container {
    margin-top: 3rem;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }
  
  .giscus {
    width: 100%;
  }
  
  /* 響應式設計 */
  @media (max-width: 768px) {
    .giscus-container {
      padding: 1rem;
      margin-top: 2rem;
    }
  }
</style> 