---
export interface Props {
  repo: string;
  repoId: string;
  category: string;
  categoryId: string;
  mapping?: string;
  strict?: boolean;
  reactionsEnabled?: boolean;
  emitMetadata?: boolean;
  inputPosition?: 'top' | 'bottom';
  theme?: 'light' | 'dark' | 'preferred_color_scheme';
  lang?: string;
  loading?: 'lazy' | 'eager';
}

const {
  repo = "ccc333bbb/memo",
  repoId = "R_kgDOLqQAAA",
  category = "Announcements",
  categoryId = "DIC_kwDOLqQAAM4CbqQAAA",
  mapping = "pathname",
  strict = false,
  reactionsEnabled = true,
  emitMetadata = false,
  inputPosition = "bottom",
  theme = "preferred_color_scheme",
  lang = "zh-TW",
  loading = "lazy"
} = Astro.props;
---

<div class="giscus-container">
  <div class="giscus" id="giscus"></div>
</div>

<script>
  const giscusScript = document.createElement('script');
  giscusScript.src = 'https://giscus.app/client.js';
  giscusScript.setAttribute('data-repo', 'ccc333bbb/memo');
  giscusScript.setAttribute('data-repo-id', 'R_kgDOLqQAAA');
  giscusScript.setAttribute('data-category', 'Announcements');
  giscusScript.setAttribute('data-category-id', 'DIC_kwDOLqQAAM4CbqQAAA');
  giscusScript.setAttribute('data-mapping', 'pathname');
  giscusScript.setAttribute('data-strict', 'false');
  giscusScript.setAttribute('data-reactions-enabled', 'true');
  giscusScript.setAttribute('data-emit-metadata', 'false');
  giscusScript.setAttribute('data-input-position', 'bottom');
  giscusScript.setAttribute('data-theme', 'preferred_color_scheme');
  giscusScript.setAttribute('data-lang', 'zh-TW');
  giscusScript.setAttribute('data-loading', 'lazy');
  giscusScript.crossOrigin = 'anonymous';
  
  document.getElementById('giscus')?.appendChild(giscusScript);
</script>

<style>
  .giscus-container {
    margin-top: 3rem;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }
  
  .giscus {
    width: 100%;
  }
  
  /* 響應式設計 */
  @media (max-width: 768px) {
    .giscus-container {
      padding: 1rem;
      margin-top: 2rem;
    }
  }
</style> 